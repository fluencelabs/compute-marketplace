query ProvidersQuery(
  $effectorIds: [String!],
  $offset: Int,
  $limit: Int,
  $orderBy: Provider_orderBy,
  $orderType: OrderDirection,
) {
  providers(
      where: {
          offers_: {
              effectors_: {
                  effector_in: $effectorIds,
              }
          }
      }
      first: $limit
      skip: $offset
      orderBy: $orderBy
      orderDirection: $orderType
  ) {
    ...ProviderBase
    offers {
      ...BasicOffer
    }
  }
}

query ProviderQuery(
  $id: ID!
) {
  provider(id: $id) {
    ...ProviderBase
    peerCount
    effectorCount
  }
}

fragment ProviderBase on Provider {
    id
    name
    computeUnitsAvailable
    computeUnitsTotal
}

fragment BasicOffer on Offer {
    id
    createdAt
    pricePerEpoch
    paymentToken {
      id
      symbol
    }
    computeUnitsTotal
    computeUnitsAvailable
    effectors {
      effector {
        id
        description
      }
    }
}
